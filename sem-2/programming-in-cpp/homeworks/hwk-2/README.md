# Домашнее задание 2. Калькулятор со свёртками.

## Простой калькулятор

Поддерживаются базовые арифметические операции и ввод десятичных чисел. Операции производятся над значением из единственного регистра (он же - приёмник результата) и, если операция бинарная, вторым операндом, вводимым после оператора.

### Ограничения

Размер вводимых чисел ограничен 10 десятичными цифрами.

### Операции

- сложение `+`
- вычитание `-`
- умножение `*`
- деление `/`
- остаток от деления `%`
- инвертирование знака `_`
- возведение в степень `^`
- квадратный корень `SQRT`

### Пользовательский интерфейс

Пользовательский ввод построчно читается из стандартного ввода, в каждой строке ожидается одна операция:

```
op [arg]
```

Результат каждой операции выводится в стандартный вывод, сообщения об ошибках - в стандартный вывод ошибок.

## Идея

Свёртка - это последовательное применение одной и той же бинарной операции к последовательности значений.

Например, имея последовательность чисел `1 2 3 4 5` и операцию `+` можно "свернуть" последовательность по этой операции, задав начальное значение (например, `0`):

1. `((((0 + 1) + 2) + 3) + 4) + 5` - левая свёртка
2. `1 + (2 + (3 + (4 + (5 + 0))))` - правая свёртка

## Задание

Расширить реализацию калькулятора поддержкой **левой** свертки для всех бинарных операций (не считая операции присваивания). Начальным значением будет служить текущее значение регистра калькулятора, а последовательность значений будет задаваться пользователем через пробел.

Синтаксис:

```
(+) 1 2 34567.8345 9
```

```
(^) 1 2 3
```

Программный интерфейс не должен меняться, реализация по-прежнему должна предоставлять `double process_line(double, const std::string &)`.

## Решение

Так как основной функционал калькулятора был уже реализован, оставалось добавить только поддержку операции свёртки. Для этого я добавил в функцию разбора операции из данного выражения проверку на использование синтаксиса свёртки и валидацию самого выражения, а для вычисления цикл добавил один цикл, в котором применялась бинарная операция, указанная в свёртке. Итоговое решение доступно в файле [src/calc.cpp](./src/calc.cpp), его можно запустить, собрав проект CMake, который на выходе создаст исполняемый файл `calc_fold` - калькулятор с поддержкой левой свёртки.
