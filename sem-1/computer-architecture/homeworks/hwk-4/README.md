# Домашнее задание 4. Расширение системы команд ЭВМ.

## Цель задания

Изучение микрокоманд базовой ЭВМ, микропрограмм выполнения отдельных команд, а также овладение навыками составления микропрограмм для новых команд.

## Описание

### Часть I

Написать последовательность адресов микрокоманд, которые должны быть выполнены при реализации заданного фрагмента программы, начинающегося с команды, расположенной по адресу 002 (перед выполнением программы исполняется команда "Пуск", очищающая аккумулятор и регистр переноса). Кроме того необходимо описать поля шести последних микрокоманд цикла "ИСПОЛНЕНИЕ" команды, отмеченной знаком "+". Описания каждой микрокоманды выполнить в виде рисунков.

### Часть II

А. Написать завершающие вертикальные микрокоманды цикла "ИСПОЛНЕНИЕ" следующих команд.

Б. Написать тестовые программы для проверки правильности исполнения всех трех синтезированных команд базовой ЭВМ и подготовиться к выполнению лабораторной работы No8. Тестовые программы должны отвечать следующим требованиям:

1. Для синтезированных арифметических и безадресных команд результат их выполнения должен быть зафиксирован в памяти базовой ЭВМ, а не только в регистрах,
2. Если проверяемая арифметическая или безадресная команда устанавливает признаки результата (C, Z, N), необходимо проверить правильную установку одного из них, используя соответствующую команду перехода. Результат проверки признака зафиксировать в памяти базовой ЭВМ.
3. Для синтезированных команд переходов необходимо проверить команду как при выполнении условия перехода, так и при его невыполнении. Результат проверки в обоих случаях зафиксировать в памяти базовой ЭВМ. Таким образом, после выполнения правильно разработанной тестовой программы в автоматическом режиме в памяти базовой ЭВМ будет размещена информация, позволяющая однозначно подтвердить правильность выполнения синтезированной команды.

В. При разработке микропрограмм заданных команд следует иметь в виду:

1. В процессе дешифрации команды 7ххх в РА записывается адрес операнда (может использоваться для команд пересылки), а в РД - сам операнд (может использоваться для команд загрузки и сравнения). Затем осуществляется переход к ячейке памяти микрокоманд ВО, где надо разместить первую синтезируемую микрокоманду команды 7ххх.
2. После выборки команды перехода ххх в РД сохраняется адрес перехода (адресная часть команды), который может быть переписан в СК при выполнении условия перехода. Последняя микрокоманда дешифрации команды Dххх передает управление в ячейку с адресом D0, где надо разместить первую синтезируемую микрокоманду команды Dххх.
3. Когда в процессе дешифрации безадресных команд выясняется, что в 10-м и 11-м разрядах РК содержатся единицы (т.е. выбрана одна из команд FC00, FD00, FE00 или FF00), управление передается в ячейку с адресом Е0. Здесь должны начинаться микрокоманды дополнительной дешифрации, выделяющие заданную команду путем анализа 9-го и 8-го разрядов РК и передающие управление в свободную область памяти микрокоманд (от Ех до FF), где следует разместить микрокоманды реализации безадресной команды.
4. Все микропрограммы реализуемых команд должны заканчиваться микрокомандой 838F (GOTO ПРЕ(8F)), осуществляющей переход к микрокомандам, завершающим исполнение любой команды базовой микро ЭВМ.

## Исходные данные варианта

### Часть I

Вариант 6:

| Адрес | Команда | Код  |
| ----- | ------- | ---- |
| 01    | 1       | 0001 |
| 02    | CMC     | F500 |
| 03    | BCS 05  | 8005 |
| 04    | NOP     | F100 |
| 05    | +ADC 01 | 5001 |

### Часть II

Вариант 6:

Команда 7xxx – пересылка удвоенная (записать в ячейку памяти, на которую указывает адресная часть команды, удвоенное содержимое аккумулятора)

Команда Dxxx – организовывать переход к команде, расположенной по адресу, на которую указывает адресная часть команды, если 7-й бит аккумулятора равен единице.

Команда FE00 – циклический сдвиг вправо с очисткой регистра C

## Решение

Исходный код новых микрокоманд для БЭВМ, а также программа-тест предоставлены в [PDF-отчёте solution.pdf](./solution.pdf)
